#include <SDL.h>

SDL_Window*   sdlWindow_;
SDL_Renderer* sdlRenderer_;

void init ()
{
  if (SDL_Init(SDL_INIT_EVERYTHING) < 0)
    throw "Oh, no!";

  sdlWindow_ = SDL_CreateWindow("",             
				SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED,
				640, 480, 
				0);        
  if (!sdlWindow_) throw "Oh, no!";

  sdlRenderer_ = SDL_CreateRenderer(sdlWindow_, -1, 0);
  if (!sdlRenderer_) throw "Oh, no!";
}

void drawSomeBoxes ()
{
  bool OKWereDone = false;
  int x = 0, y = 0;
  
  while (! OKWereDone) 
  {
    SDL_Event event;
    while (SDL_PollEvent(&event) != 0)
    {
      if ((event.type == SDL_QUIT) ||
	  (event.type == SDL_KEYDOWN
	   && event.key.keysym.scancode == SDL_SCANCODE_ESCAPE))
	OKWereDone = true; 
      else if (event.type == SDL_TEXTINPUT)
      {
	SDL_Rect rect = {x, y, 8, 8};
	if (SDL_RenderFillRect (sdlRenderer_, &rect) < 0) throw "Oh, no!";
	x+= 10;
	SDL_RenderPresent (sdlRenderer_);

      }
    }
  }
}


int main (int argc, char** argv)
{
  init ();

  //Let's draw white rects on a green bkgd
  SDL_SetRenderDrawColor(sdlRenderer_, 0, 255, 0, 255);
  SDL_RenderClear       (sdlRenderer_); 
  SDL_SetRenderDrawColor(sdlRenderer_, 255, 255, 255, 255);
  
  drawSomeBoxes ();
  
  return 0;
}
